# 医嘱执行监督系统设计方案

**日期**: 2026-01-23
**状态**: 设计中
**版本**: 1.0

---

## 1. 产品定位

### 1.1 核心价值主张

**提升患者依从性的智能医嘱执行监督系统**

解决的核心问题：
- 患者不按时吃药、不按医嘱执行
- 医生/家属不知道患者有没有完成
- 发现问题时已经太晚了

### 1.2 目标用户

| 角色 | 主要需求 |
|------|----------|
| **患者** | 清晰的任务提醒、简单的完成操作 |
| **家属** | 实时了解亲人执行情况、异常时收到通知 |
| **医生** | 查看患者执行数据、及时干预调整医嘱 |

### 1.3 与竞品差异化

| 竞品 | 局限 | 我们的优势 |
|------|------|------------|
| wardguard | 只管住院医生 | 住院+家庭双场景 |
| healthguard | 只管护理任务 | AI生成医嘱+依从性分析 |
| qualityguard | 只做事后质控 | 实时预警+主动干预 |

---

## 2. 系统架构

### 2.1 整体架构

```
┌─────────────────────────────────────────────────────────────────┐
│                        医嘱执行监督系统                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────┐      ┌──────────────┐      ┌──────────────┐  │
│  │   iOS 患者端  │      │  iOS 家属端   │      │  Web 医生端  │  │
│  │  ─────────── │      │  ─────────── │      │  ─────────── │  │
│  │  • 任务列表   │      │  • 关怀患者   │      │  • 医嘱管理   │  │
│  │  • 打卡完成   │      │  • 执行监控   │      │  • 依从性看板 │  │
│  │  • 数据录入   │      │  • 异常通知   │      │  • 数据分析   │  │
│  └──────────────┘      └──────────────┘      └──────────────┘  │
│         │                       │                       │       │
│         └───────────────────────┼───────────────────────┘       │
│                                 ▼                               │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                    FastAPI 后端                            │  │
│  │  ┌─────────────────────────────────────────────────────┐ │  │
│  │  │  AI 医嘱生成引擎               │ │  │
│  │  │  • 分析问诊对话 → 提取医嘱内容                        │ │  │
│  │  │  • 医学知识库 → 补充注意事项                          │ │  │
│  │  │  • 生成结构化任务（时间/频次/监测项）                  │ │  │
│  │  └─────────────────────────────────────────────────────┘ │  │
│  │  ┌─────────────────────────────────────────────────────┐ │  │
│  │  │  医嘱管理服务           │ │  │
│  │  │  • 创建/审核/修改/停用医嘱                            │ │  │
│  │  │  • 任务调度引擎（定时任务生成）                        │ │  │
│  │  └─────────────────────────────────────────────────────┘ │  │
│  │  ┌─────────────────────────────────────────────────────┐ │  │
│  │  │  执行监督服务         │ │  │
│  │  │  • 打卡记录、超时检测、依从性计算                     │ │  │
│  │  │  • 异常数据预警（阈值判断）                           │ │  │
│  │  └─────────────────────────────────────────────────────┘ │  │
│  │  ┌─────────────────────────────────────────────────────┐ │  │
│  │  │  通知服务               │ │  │
│  │  │  • 任务提醒、超时推送、日报周报                       │ │  │
│  │  │  • 多渠道推送（APP/短信/微信）                        │ │  │
│  │  └─────────────────────────────────────────────────────┘ │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                 │                               │
│                                 ▼                               │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                    数据层                                  │  │
│  │  • 医嘱表 (medical_orders)                                 │  │
│  │  • 任务实例表 (task_instances)                             │  │
│  │  • 打卡记录表 (completion_records)                         │  │
│  │  • 关系表 (patient_family_bonds)                           │  │
│  └───────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 核心数据模型

#### 医嘱表 (medical_orders)
医生审核后生效的医嘱主表。

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| patient_id | UUID | 患者ID |
| doctor_id | UUID | 开具医生 |
| order_type | enum | 用药/监测/行为/复诊 |
| title | string | 医嘱标题 |
| description | text | 详细说明 |
| schedule_type | enum | 一次性/每日/每周/自定义 |
| start_date | date | 开始日期 |
| end_date | date | 结束日期 |
| frequency | string | 频次（如"每日3次"） |
| reminder_time | time[] | 提醒时间 |
| ai_generated | boolean | 是否AI生成 |
| status | enum | draft/active/completed/stopped |
| created_at | timestamp | 创建时间 |
| updated_at | timestamp | 更新时间 |

#### 任务实例表 (task_instances)
系统根据医嘱自动生成的每日任务。

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| order_id | UUID | 关联医嘱 |
| patient_id | UUID | 患者ID |
| scheduled_date | date | 计划执行日期 |
| scheduled_time | time | 计划执行时间 |
| status | enum | pending/completed/overdue/skipped |
| completed_at | timestamp | 完成时间 |
| completion_notes | text | 患者备注 |

#### 打卡记录表 (completion_records)
执行时的详细数据记录。

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| task_instance_id | UUID | 关联任务实例 |
| completed_by | UUID | 患者或家属ID |
| completion_type | enum | check/photo/value/medication |
| value | jsonb | 监测值（如血糖8.5） |
| photo_url | string | 照片证明 |
| notes | text | 备注 |
| created_at | timestamp | 创建时间 |

#### 患者家属关系表 (patient_family_bonds)

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| patient_id | UUID | 患者ID |
| family_member_id | UUID | 家属用户ID |
| relationship | string | 父母/子女/配偶等 |
| notification_level | enum | all/abnormal/summary/none |

---

## 3. 核心功能流程

### 3.1 医嘱生成流程

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  AI问诊结束  │ ──▶ │ AI提取医嘱   │ ──▶ │  医生审核   │
└─────────────┘     └─────────────┘     └─────────────┘
                                                 │
                      ┌─────────────┐           ▼
                      │  草稿状态    │ ──▶ ┌─────────────┐
                      │  可编辑     │      │  激活医嘱   │
                      └─────────────┘     └─────────────┘
                                                 │
                                                 ▼
                                          ┌─────────────┐
                                          │ 生成每日任务 │
                                          │  推送给患者  │
                                          └─────────────┘
```

### 3.2 患者执行流程

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ 收到任务提醒 │ ──▶ │  打卡完成   │ ──▶ │  记录数据   │
│  (推送)     │     │  (拍照/输入) │     │  (上传)     │
└─────────────┘     └─────────────┘     └─────────────┘
                                                 │
                      ┌─────────────┐           ▼
                      │  超时未完成  │ ◀─ ┌─────────────┐
                      │  触发通知   │     │ 家属收到同步 │
                      └─────────────┘     └─────────────┘
```

### 3.3 异常预警流程

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ 监测数据录入 │ ──▶ │  阈值判断   │ ──▶ │  正常范围   │
│  (血糖13.2) │     │  (>10异常)  │     │  静默记录   │
└─────────────┘     └─────────────┘     └─────────────┘
                                                 │
                           ┌─────────────┐       ▼
                           │  异常值！   │ ──▶ ┌─────────────┐
                           │ 多级预警   │     │ 推送医生+家属│
                           │ 黄/橙/红   │     │ 建议处理方案 │
                           └─────────────┘     └─────────────┘
```

### 3.4 依从性分析

**计算公式：** 依从率 = 已完成任务 / 计划任务 × 100%

**时间维度：**
- 日依从率：今天完成情况
- 周依从率：近7天趋势
- 医嘱依从率：整个医嘱周期

**可视化展示：**
- 日历热力图（绿色完成/红色未完成）
- 趋势折线图
- 异常次数统计

### 3.5 家属关怀功能

```
┌─────────────────────────────────────────────────┐
│                  家属端首页                      │
├─────────────────────────────────────────────────┤
│  👩 妈妈 (糖尿病患者)                            │
│  ─────────────────────────────────────────────  │
│  今日进度  ████████░░ 80% (4/5)                 │
│                                                 │
│  ✅ 早餐前胰岛素 - 已完成 08:05                  │
│  ✅ 早餐后血糖 - 正常 7.8                        │
│  ⏰ 午餐前胰岛素 - 待完成 12:00                  │
│  ⏰ 午餐后血糖 - 待完成 14:00                    │
│  ⏰ 晚餐运动 - 待完成 19:00                      │
│                                                 │
│  📊 本周依从性: 92% | 异常: 1次                 │
└─────────────────────────────────────────────────┘
```

---

## 4. 页面设计

### 4.1 iOS 患者端页面

#### 4.1.1 医嘱列表页

```
┌─────────────────────────────────────┐
│ ◀ 医嘱任务                    🔔 3  │  ← 导航栏
├─────────────────────────────────────┤
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │  ← 日期选择器（左右滑动）
│  今天 1月23日  周四                 │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                     │
│  ⏰ 待完成 (3)                       │  ← 分组标题
│  ┌─────────────────────────────┐   │
│  │ 💊 早餐前胰岛素               │   │
│  │ 08:00  ·  距提醒 30分钟       │   │
│  │ [立即打卡]                   │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 📊 早餐后血糖监测             │   │
│  │ 09:00                        │   │
│  └─────────────────────────────┘   │
│                                     │
│  ✅ 已完成 (2)                       │
│  ┌─────────────────────────────┐   │
│  │ 💊 昨晚睡前药                 │   │
│  │ 22:00  ·  已完成 22:05       │   │
│  └─────────────────────────────┘   │
│                                     │
│  [底部导航: 首页 | 医嘱 | AI医生 | 我的] │
└─────────────────────────────────────┘
```

#### 4.1.2 打卡弹窗

```
┌─────────────────────────────────────┐
│         完成医嘱任务         [×]    │
├─────────────────────────────────────┤
│                                     │
│  💊 早餐前胰岛素                     │
│                                     │
│  ┌─────────────────────────────┐   │
│  │      🎙️ 按住说话            │   │  ← 语音录入
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │   📷 上传照片（可选）         │   │
│  │   [───────────]             │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  备注（可选）                │   │
│  │  [──────────────────────]   │   │
│  └─────────────────────────────┘   │
│                                     │
│         [取消]        [确认完成]    │
└─────────────────────────────────────┘
```

#### 4.1.3 监测数据录入页（语音版）

```
┌─────────────────────────────────────┐
│ ◀ 早餐后血糖监测              [保存] │
├─────────────────────────────────────┤
│                                     │
│  请输入血糖值                        │
│                                     │
│       ┌─────────────────────┐       │
│       │       8.5           │       │  ← AI自动填入
│       │     mmol/L          │       │
│       └─────────────────────┘       │
│                                     │
│  ┌─────────────────────────────┐   │
│  │      🎙️ 按住说话            │   │  ← 语音录入按钮
│  │      "我血糖8点5"           │   │
│  └─────────────────────────────┘   │
│                                     │
│  AI识别中... 🔴                     │  ← 识别中状态
│  ┌─────────────────────────────┐   │
│  │ "早餐后血糖8.5mmol/L"        │   │  ← 识别结果展示
│  │        ✓ 已抽取数值          │   │
│  └─────────────────────────────┘   │
│                                     │
│  参考范围：空腹 3.9-6.1  餐后2h <7.8│
│  当前值正常 ✅                       │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  或手动输入                  │   │
│  │  [数字键盘...]              │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

#### 4.1.4 血压监测录入页（双数值抽取）

```
┌─────────────────────────────────────┐
│ ◀ 血压监测                  [保存]  │
├─────────────────────────────────────┤
│                                     │
│  收缩压(高压)    舒张压(低压)       │
│  ┌──────────┐   ┌──────────┐       │
│  │   135    │   │   85     │       │  ← AI自动填入
│  │  mmHg    │   │  mmHg    │       │
│  └──────────┘   └──────────┘       │
│                                     │
│  ┌─────────────────────────────┐   │
│  │      🎙️ 按住说话            │   │
│  └─────────────────────────────┘   │
│                                     │
│  AI识别中... 🔴                     │
│  ┌─────────────────────────────┐   │
│  │ "血压135到85"               │   │
│  │ 收缩压: 135  舒张压: 85 ✓   │   │  ← 抽取结果
│  └─────────────────────────────┘   │
│                                     │
│  参考范围：<120/80 正常             │
│  当前值：偏高 ⚠️                     │
└─────────────────────────────────────┘
```

#### 4.1.5 家属端关怀页

```
┌─────────────────────────────────────┐
│ ◀ 家人关怀                    🔔     │
├─────────────────────────────────────┤
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  👩 妈妈  糖尿病患者                 │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                     │
│  今日进度  4/5 完成  80%            │
│  ████████████████░░░░               │
│                                     │
│  ✅ 早餐前胰岛素  08:05             │
│  ✅ 早餐后血糖    7.8mmol/L         │
│  ⏰ 午餐前胰岛素  待完成 12:00       │
│  ⏰ 午餐后血糖    待完成             │
│  ⏰ 晚餐运动      待完成             │
│                                     │
│  ────────────────────────────────── │
│  📊 本周依从性                      │
│  ┌─────────────────────────────┐   │
│  │  100% ████                  │   │
│  │   90% ████████              │   │
│  │   85% ██████                │   │
│  │   92% ███████               │   │
│  │   88% ██████                │   │
│  │   95% ████████              │   │
│  │   90% ████████   ← 今日      │   │
│  │   一 二 三 四 五 六 日       │   │
│  └─────────────────────────────┘   │
│                                     │
│  ⚠️ 本周异常：1次 (血糖11.2)        │
│                                     │
│  [查看详情]  [联系妈妈]             │
└─────────────────────────────────────┘
```

### 4.2 Web 医生端页面

#### 4.2.1 医嘱管理页

```
┌─────────────────────────────────────────────────────────┐
│ 医嘱管理                                  [新建医嘱] [导出]│
├─────────────────────────────────────────────────────────┤
│ 患者搜索: [──────────────]  状态: [全部▼]  科室: [全部▼]│
├─────────────────────────────────────────────────────────┤
│ 患者     医嘱内容      开始日期   状态    依从性   操作  │
├─────────────────────────────────────────────────────────┤
│ 张三     胰岛素注射    2024-01-15 进行中   92%   [查看] │
│         每日3次                                  [编辑] │
│                                                 [停用] │
│─────────────────────────────────────────────────────────│
│ 李四     血糖监测      2024-01-10 进行中   88%   [查看] │
│         每日4次                                  [编辑] │
│                                                 [停用] │
│─────────────────────────────────────────────────────────│
│ 王五     降压药        2024-01-20 已完成  100%  [查看] │
│         每日1次                                                 │
└─────────────────────────────────────────────────────────┘
```

#### 4.2.2 患者依从性详情页

```
┌─────────────────────────────────────────────────────────┐
│ ◀ 返回                张三的医嘱执行情况                 │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────┬─────────────────────────────────────┐   │
│ │             │  胰岛素注射（每日3次）                │   │
│ │   患者头像   │  开始：2024-01-15  结束：进行中     │   │
│ │             │  医生：李医生                       │   │
│ └─────────────┴─────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  整体依从性                                              │
│  ┌─────────────────────────────────────────────────┐   │
│  │  ████████████████████████░░░░  92%              │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  最近30天趋势                                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │  100% ┤                                          │   │
│  │   90% ┤     ●──●──●                              │   │
│  │   80% ┤  ●     ●    ●──●──●                      │   │
│  │   70% ┤●                        ●                │   │
│  │        └────────────────────────────────         │   │
│  │        1/15  1/20  1/25  1/30                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  未完成记录 (8次)                                       │
│  ┌─────────────────────────────────────────────────┐   │
│  │  1/18 早餐前胰岛素  -  超时未打卡                │   │
│  │  1/20 晚餐后血糖    -  超时未打卡                │   │
│  │  1/22 午餐前胰岛素  -  超时未打卡                │   │
│  │  [查看全部]                                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  异常记录 (2次)                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  1/19 血糖值 11.2mmol/L  →  已联系患者调整       │   │
│  │  1/25 血糖值 10.5mmol/L  →  待跟进              │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

---

## 5. 语音录入功能

### 5.1 语音录入流程

```
┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐
│ 按住说话 │ ──▶ │ 语音识别 │ ──▶ │ AI抽取  │ ──▶ │ 自动填入 │
└─────────┘    └─────────┘    └─────────┘    └─────────┘
              (ASR)          (LLM)          (UI)
```

### 5.2 AI抽取规则

#### 血糖抽取
| 输入 | 抽取结果 | 备注 |
|------|----------|------|
| "血糖8点5" | 8.5 | 小数点语音变体 |
| "血糖八" | 8 | 中文数字转阿拉伯数字 |
| "餐后血糖7.8" | 7.8 | 带前缀 |
| "低血糖3.2" | 3.2 + 预警 | 触发低血糖预警 |

#### 血压抽取
| 输入 | 抽取结果 |
|------|----------|
| "血压135到85" | 135/85 |
| "血压135 85" | 135/85 |
| "高压150低压95" | 150/95 |
| "血压120" | 提示"请说完整血压值" |

#### 用药抽取
| 输入 | 抽取结果 |
|------|----------|
| "吃完了"/"打完了" | 确认执行 |
| "吃了两片" | 记录数量=2 |
| "忘了吃" | 标记漏服 |
| "不想吃" | 记录原因+通知医生 |

### 5.3 技术实现

复用现有的 `RealtimeSpeechService` + 新增 `ValueExtractionAgent`：

```python
# backend/app/services/agents/value_extraction.py

class ValueExtractionAgent:
    """从语音识别文本中抽取医嘱数值"""

    async def extract_blood_glucose(self, text: str) -> float:
        """抽取血糖值"""
        prompt = f"""
        从以下语音识别文本中抽取血糖值（单位mmol/L）：
        "{text}"

        只返回数值，如8.5
        """
        # LLM抽取逻辑
        ...

    async def extract_blood_pressure(self, text: str) -> tuple:
        """抽取血压值（收缩压，舒张压）"""
        ...
```

---

## 6. 用户操作流程

### 6.1 医院场景（医嘱建立）

1. 医生在AI问诊系统与患者对话
2. 问诊结束，AI自动分析对话，提取医嘱内容
3. AI生成结构化医嘱（草稿状态）
   - 用药：胰岛素，每日3次，餐前注射
   - 监测：血糖，每日4次，餐前餐后
   - 行为：餐后30分钟运动，每日1次
4. 医生审核/修改医嘱
5. 医生确认激活，设置执行周期（如1个月）
6. 系统生成每日任务，推送到患者手机

### 6.2 家庭场景（患者执行）

7. 患者手机 08:00 收到推送提醒："该打早餐前胰岛素了"
8. 患者点击通知，打开打卡页面
9. 患者完成注射，点击"立即打卡"
10. 拍照（可选），点击"确认完成"
11. 系统记录完成，任务标记为✅
12. 09:00 提醒："该测餐后血糖了"
13. 患者按住说话："血糖8点5"
14. AI识别并自动填入8.5，系统判断正常范围，记录完成

### 6.3 家庭场景（家属监督）

15. 家属打开APP，进入"家人关怀"页面
16. 看到妈妈今日进度：4/5 完成，80%
17. 看到每项任务的完成状态和时间
18. 如果妈妈漏做：
    - 家属收到通知："妈妈未完成午餐前胰岛素"
    - 家属可以打电话提醒
    - 或在APP内留言提醒

### 6.4 异常场景

19. 妈妈测血糖 11.2mmol/L（异常）
20. 系统立即触发橙色预警
21. 同时推送给：
    - 患者："血糖偏高，请联系医生"
    - 家属："妈妈血糖异常 11.2，请注意"
    - 医生："患者张三血糖异常，建议跟进"
22. 医生在后台看到异常，可以主动联系

### 6.5 复诊场景

23. 医生查看患者依从性报告
24. 发现依从性只有 75%，有8次未完成
25. 医生调整医嘱或联系患者了解原因

---

## 7. 实现计划

### 7.1 复用现有能力

| 现有模块 | 复用方式 | 新增内容 |
|----------|----------|----------|
| AI问诊 | 医嘱提取Agent | 新建 PrescriptionAgent |
| 用户系统 | 患者账号复用 | 新增家属角色、关系绑定 |
| 通知服务 | 复用推送能力 | 新增任务提醒、异常预警 |
| iOS端 | 复用现有框架 | 新增医嘱任务页面 |
| 语音服务 | RealtimeSpeechService | 新增 ValueExtractionAgent |

### 7.2 需要新增的核心模块

#### 后端 (backend/app/)

```
services/
├── agents/
│   └── value_extraction.py      # AI数值抽取Agent
├── prescription_agent.py         # AI医嘱生成Agent
├── medical_order_service.py      # 医嘱CRUD
├── task_scheduler.py             # 任务调度引擎
├── compliance_service.py         # 依从性计算
└── alert_service.py              # 异常预警

models/
├── medical_order.py              # 医嘱模型
├── task_instance.py              # 任务实例
├── completion_record.py          # 打卡记录
└── family_bond.py                # 家属关系

routes/
├── medical_orders.py             # 医嘱API
└── compliance.py                 # 依从性API
```

#### iOS (ios/xinlingyisheng/)

```
ViewModels/
└── MedicalOrderViewModel.swift

Views/
├── MedicalOrderListView.swift    # 医嘱列表
├── TaskCheckInView.swift         # 打卡页面
├── VoiceInputView.swift          # 语音录入组件
├── FamilyCareView.swift          # 家属关怀页
└── ComplianceChartView.swift     # 依从性图表
```

### 7.3 关键技术点

1. **任务调度**：用 APScheduler 或 Celery 定时生成每日任务
2. **阈值预警**：配置化规则引擎（如血糖>10预警）
3. **依从性计算**：实时统计 + 缓存优化
4. **离线支持**：iOS端支持离线打卡，联网后同步
5. **语音抽取**：ASR + LLM两阶段处理

### 7.4 MVP阶段功能

| 阶段 | 功能 |
|------|------|
| **P0** | AI医嘱生成、医生审核、患者打卡、基础通知、语音录入 |
| **P1** | 家属关怀、依从性分析、异常预警 |
| **P2** | 数据图表、周报月报、智能提醒优化 |

---

## 8. 验证方式

### 8.1 测试场景

1. **完整流程**：AI问诊 → 生成医嘱 → 医生审核 → 患者打卡 → 家属查看
2. **异常预警**：录入异常血糖值 → 验证通知触发
3. **超时提醒**：任务未完成 → 验证超时推送
4. **依从性统计**：多日打卡 → 验证图表正确性
5. **语音录入**：按住说话 → 验证数值正确抽取

### 8.2 验收标准

| 指标 | 目标 |
|------|------|
| 语音识别准确率 | >95% |
| 数值抽取准确率 | >98% |
| 通知延迟 | <30秒 |
| 依从性计算准确率 | 100% |

---

## 9. 附录

### 9.1 医嘱类型枚举

```python
class OrderType(str, Enum):
    MEDICATION = "medication"    # 用药任务
    MONITORING = "monitoring"    # 监测任务
    BEHAVIOR = "behavior"        # 行为任务
    FOLLOWUP = "followup"        # 复诊任务
```

### 9.2 任务状态枚举

```python
class TaskStatus(str, Enum):
    PENDING = "pending"          # 待完成
    COMPLETED = "completed"      # 已完成
    OVERDUE = "overdue"          # 已超时
    SKIPPED = "skipped"          # 已跳过
```

### 9.3 预警级别

| 级别 | 条件 | 处理 |
|------|------|------|
| 黄色 | 轻微异常 | 记录，日报告 |
| 橙色 | 中度异常 | 即时推送家属 |
| 红色 | 重度异常 | 即时推送医生+家属 |

---

**文档结束**
